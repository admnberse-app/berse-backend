# =============================================================================
# ENVIRONMENT CONFIGURATION EXAMPLE
# =============================================================================
# Copy this file to .env.local for development
# Never commit .env or .env.local to git!
# For Railway: Set these in Railway dashboard under Variables
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Development: Use Railway staging database for consistency with deployed environment
# Production/Staging: Railway auto-fills from linked PostgreSQL service
# Get connection string from Railway dashboard → Your Project → PostgreSQL → Connect
DATABASE_URL="postgresql://postgres:password@crossover.proxy.rlwy.net:27596/railway?connect_timeout=30&pool_timeout=30"
DATABASE_MAX_CONNECTIONS=20

# Note: If you need local PostgreSQL, use: postgresql://username@localhost:5432/database_name

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# IMPORTANT: Use different secrets for dev/staging/production!
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET="your-super-secret-jwt-key-here-min-64-chars"
JWT_REFRESH_SECRET="your-super-secret-refresh-jwt-key-here-min-64-chars"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV="development"
PORT=3001
API_URL="http://localhost:3001"

# CORS Configuration
CORS_ORIGIN="http://localhost:3000,http://localhost:5173"

# Redis Configuration (for caching and rate limiting)
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0

# Cookie Configuration
COOKIE_SECRET="your-cookie-secret-key-here"

# File Upload Configuration
MAX_FILE_SIZE="10mb"
UPLOAD_DIR="uploads"

# Digital Ocean Spaces Configuration
# For local development, you can use the staging space or leave empty to use local uploads
SPACES_ENDPOINT="https://sgp1.digitaloceanspaces.com"
SPACES_BUCKET="staging-berse-app"
SPACES_REGION="sgp1"
SPACES_ACCESS_KEY_ID="your-spaces-access-key"
SPACES_SECRET_ACCESS_KEY="your-spaces-secret-key"
SPACES_CDN_ENDPOINT="https://staging-berse-app.sgp1.cdn.digitaloceanspaces.com"

# Email Configuration (for notifications)
# -----------------------------------------------------------------------------
# Email Configuration - AWS SES
# -----------------------------------------------------------------------------
# Development/Staging/Production: AWS SES (Sydney region)
# SMTP credentials created in AWS Console → SES → SMTP Settings
SMTP_HOST="email-smtp.ap-southeast-2.amazonaws.com"
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER="AKIATNJFDH7ANQDFJSSL"
SMTP_PASS="BJ/XKivldc4JhXHR3vBw0SS9Y9zUVn7Q+ujNZWrBtYft"
FROM_EMAIL="noreply@berse-app.com"
FROM_NAME="Berse App"
SUPPORT_EMAIL="support@berse-app.com"

# Frontend URL for emails
FRONTEND_URL="http://localhost:5173"
APP_URL="http://localhost:5173"

# -----------------------------------------------------------------------------
# QR Code & Deep Linking Configuration
# -----------------------------------------------------------------------------
# Base URL for QR code preview pages and deep linking
# Development: Use localhost with port
# Production: Use your production domain
# APP_URL is used for generating QR code preview links
# If APP_URL is not set, FRONTEND_URL will be used as fallback

# App Store URLs for QR code download links
IOS_APP_STORE_URL="https://apps.apple.com/app/berse"
ANDROID_PLAY_STORE_URL="https://play.google.com/store/apps/details?id=com.berse.app"

# External API Keys
GOOGLE_MAPS_API_KEY="your-google-maps-api-key"
CLOUDINARY_CLOUD_NAME="your-cloudinary-cloud-name"
CLOUDINARY_API_KEY="your-cloudinary-api-key"
CLOUDINARY_API_SECRET="your-cloudinary-api-secret"

# Third Party Payment APIs
GOBARAQAH_API_KEY="your-gobaraqah-api-key"
IBANTU_API_KEY="your-ibantu-api-key"
SETEL_API_KEY="your-setel-api-key"
TOUCHNGO_API_KEY="your-touchngo-api-key"
BILLPLZ_API_KEY="your-billplz-api-key"
TOYYIBPAY_API_KEY="your-toyyibpay-api-key"

# Monitoring and Analytics
SENTRY_DSN="your-sentry-dsn"
GOOGLE_ANALYTICS_ID="GA-XXXXXXXXX"

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_LOGIN_MAX=3

# Security Configuration
BCRYPT_ROUNDS=12
SESSION_TIMEOUT_MINUTES=60
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_MINUTES=30

# Feature Flags
ENABLE_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=false
ENABLE_SMS_VERIFICATION=false
ENABLE_OAUTH=false
ENABLE_MFA=false

# Push Notifications (Web Push API)
VAPID_PUBLIC_KEY="your-vapid-public-key"
VAPID_PRIVATE_KEY="your-vapid-private-key"
VAPID_EMAIL="mailto:admin@bersemuka.com"

# Webhook URLs
WEBHOOK_SECRET="your-webhook-secret"
PAYMENT_WEBHOOK_URL="/api/webhooks/payment"

# -----------------------------------------------------------------------------
# Payment Gateway Configuration
# -----------------------------------------------------------------------------
# Xendit Configuration (Southeast Asia)
# Get credentials from: https://dashboard.xendit.co/settings/developers#api-keys
XENDIT_SECRET_KEY="xnd_development_your_secret_key"
XENDIT_PUBLIC_KEY="xnd_public_development_your_public_key"
XENDIT_WEBHOOK_TOKEN="your_webhook_verification_token"

# Stripe Configuration (Global)
# Get credentials from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_signing_secret"

# Payment Gateway URLs
XENDIT_WEBHOOK_URL="/api/webhooks/payment/xendit"
STRIPE_WEBHOOK_URL="/api/webhooks/payment/stripe"
XENDIT_ENVIRONMENT="test"

# Development/Testing
TEST_DATABASE_URL="postgresql://username:password@localhost:5432/bersemuka_test"
ENABLE_DEBUG_LOGS=true
MOCK_EXTERNAL_APIS=false